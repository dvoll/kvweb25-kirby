
@layer components {
    .stage-welcome {
        --col-count: 5;
        --row-count: 4;
    }
    .stage-welcome__text-box {
        @apply font-style uppercase font-bold;
        font-variation-settings: "opsz" 45, "GRAD" 20, "YTUC" 670;
        text-shadow: rgba(184, 24, 24, 0.308) 60px 10px 100px;

        @media (width >= 40rem) {
            font-variation-settings: "opsz" 30, "GRAD" 20, "YTUC" 670;
        }
    }

    body:not(.welcome-animation) .stage-welcome .transition-drive {
        @media (prefers-reduced-motion: no-preference) {
            transition: opacity .4s ease-in !important;
        }
    }
    body:not(.welcome-animation) .stage-welcome .transition-flip {
        /* transition: opacity .6s ease-in !important; */
        --flip-start-delay: 0s;
    }

    .stage-welcome__item {
        --real-position-x: calc(var(--position-x) - var(--col-count));
        --real-position-y: calc(var(--position-y) - var(--row-count));
        grid-column-end: var(--real-position-x);
        grid-row-end: var(--real-position-y);
    }
    .stage-welcome__image {
        --real-position-x: calc(var(--position-x) - var(--col-count));
        --real-position-y: calc(var(--position-y) - var(--row-count));
        position: relative;
        aspect-ratio: 1;
        background-color: rgba(184, 24, 24, 0.308);

        &::after {
            content: '';
            position: absolute;
            inset: 0;
            z-index: 1;
            background-color: hwb(0 8% 11% / 0.1);
        }
    }

    .stage-welcome__shadow {
        --real-position-x: calc(var(--position-x) - var(--col-count));
        --real-position-y: calc(var(--position-y) - var(--row-count));
        position: relative;
        z-index: -1;
        aspect-ratio: 1;
        grid-column-end: var(--real-position-x);
        grid-row-end: var(--real-position-y);
        transform: translateX(-40%) translateY(-160%);
        background-color: hwb(0 8% 11% / 0.659);
        opacity: calc(0 + (0.005 * (var(--position-y) + 1) * ((var(--position-x) + 1) * (var(--position-x) + 1))));

        @media (width >= 40rem) {
            transform: translateX(-160%) translateY(-120%);
            opacity: calc(0 + (0.005 * (var(--position-y) + 1) * ((var(--position-x) + 1) * (var(--position-x) + 1))));
        }

        @media (width >= 48rem) {
            transform: translateX(max(-17vw, -16rem)) translateY(-30px);
            opacity: calc(0.02 + (0.01 * (var(--position-y) + 1) * ((var(--position-x) + 1))));
        }

        &[style="--position-x: 3; --position-y: 0;"],
        &[style="--position-x: 1; --position-y: 2;"] {
            display: none;
        }
    }

    .stage-welcome-item-1 { --position-x: 2; --position-y: 0; --transition-delay: .12s; }
    .stage-welcome-item-2 { --position-x: 3; --position-y: 0; --transition-delay: .16s; }
    .stage-welcome-item-3 { --position-x: 4; --position-y: 0; --transition-delay: .20s; }
    .stage-welcome-item-4 { --position-x: 1; --position-y: 1; --transition-delay: .24s; }
    .stage-welcome-item-5 { --position-x: 2; --position-y: 1; --transition-delay: .28s; }
    .stage-welcome-item-6 { --position-x: 3; --position-y: 1; --transition-delay: .32s; }
    .stage-welcome-item-7 { --position-x: 4; --position-y: 1; --transition-delay: .36s; }
    .stage-welcome-item-8 { --position-x: 0; --position-y: 2; --transition-delay: .40s; }
    .stage-welcome-item-9 { --position-x: 1; --position-y: 2; --transition-delay: .44s; }
    .stage-welcome-item-10 { --position-x: 2; --position-y: 2; --transition-delay: .48s; }
    .stage-welcome-item-11 { --position-x: 3; --position-y: 2; --transition-delay: .52s; }
    .stage-welcome-item-12 { --position-x: 1; --position-y: 3; --transition-delay: .56s; }
    .stage-welcome-item-13 { --position-x: 2; --position-y: 3; --transition-delay: .64s; }

    .stage-welcome-shadow-1 {--position-x: 3; --position-y: 0; }
    .stage-welcome-shadow-2 {--position-x: 2; --position-y: 0; }
    .stage-welcome-shadow-3 {--position-x: 1; --position-y: 0; }
    .stage-welcome-shadow-4 {--position-x: 0; --position-y: 0; }
    .stage-welcome-shadow-5 {--position-x: 3; --position-y: 1; }
    .stage-welcome-shadow-6 {--position-x: 2; --position-y: 1; }
    .stage-welcome-shadow-7 {--position-x: 1; --position-y: 1; }
    .stage-welcome-shadow-8 {--position-x: 4; --position-y: 1; }
    .stage-welcome-shadow-9 {--position-x: 3; --position-y: 2; }
    .stage-welcome-shadow-10 {--position-x: 2; --position-y: 2; }
    .stage-welcome-shadow-11 {--position-x: 1; --position-y: 2; }
    .stage-welcome-shadow-12 {--position-x: 3; --position-y: 3; }
    .stage-welcome-shadow-13 {--position-x: 2; --position-y: 3; }
}


